

If you have written go code much, you may have an impression that
{ should be put in the next line,
but ...
why?



<p class="anchor" id="line-break-rule"></p>
<h3>Line Break Rules</h3>

todo: put in a new article?
* "," following the last value in a sequence literal.

genearlly ";"s are optional, but sometimes you need it.
* middle case last label.

there are really some line break rare cases.


var a,
b int

var a func (a int, b string, c string) (x int, y int, z bool,)
var b func (a int, b string, c string,) (x int, y int, z bool)
* and composite literal and function call arguments

<div>
<p>
You should have found that semicolons (<code>;</code>) are seldom used in Go code.
They only appear in some control flow blocks shown above.
In fact, many code lines can end with semicolons.
It is just that these semicolon are optional and
it is idiomatic to omit these semicolons in Go programming.
</p>

Go compilers will insert the missing semicolons for you at compile phase, either vitually or really.
Here is the insertion rules listed in
<a href="https://golang.org/ref/spec#Semicolons">Go specification</a>:
<ol>
<li>
	When the input is broken into tokens,
	a semicolon is automatically inserted into the token stream immediately
	after a line's final token if that token is
	<ul>
	<li>
		an identifier
	</li>
	<li>
		an integer, floating-point, imaginary, rune, or string literal
	</li>
	<li>
		one of the keywords <code>break</code>, <code>continue</code>,
		<code>fallthrough</code>, or <code>return</code>
	</li>
	<li>
		one of the operators and punctuation
		<code>++</code>, <code>--</code>,
		<code>)</code>, <code>]</code>, or <code>}</code>
	</li>
	</ul>
</li>
<li>
	To allow complex statements to occupy a single line,
	a semicolon may be omitted before a closing ")" or "}".
</li>
</ol>

In other words, <code>;</code> can be ignored for many situations.
Certainly, we can choose to put multiple statements in one code line.
For such situations, the <code>;</code> between two statements can't be ignored.
<pre class="line-numbers"><code class="language-go">var a = 1; var b = true
a++; b = !b
print(a); print(b)
</code></pre>

<p>
todo: should break after dot instead of before dot. a.b().c()
</p>

The rules don't directly define which positions code lines can be broken at.
They do mention which positions code lines can't be broken at.
For example, here are some cases code lines are broken at inappropriate positions.
<pre class="line-numbers"><code class="language-go">func main() 

</code></pre>

Go compiler will insert some semicolons, so the above code
is equivalent to the following one
<pre class="line-numbers"><code class="language-go">func main() 

</code></pre>

<p>
Obviously, the code will fail to compile.
</p>

If you do need to break a long code line, here is a simple rule to do it.
The simple rule is not equivalent to but it also doesn't
collide with the above mentioned official rules.

<div class="alert alert-success">
A code line should be broken just after a binary operator
or any of <code>{[(,:=</code> (six symbol letters).
</div>

<pre class="line-numbers"><code class="language-go">
package main

func check() bool {
	return false
}

func main() {
	if func() {
	}()
	func() bool {
		return true
	}(){
	}
	
	if
	check()
	check() {
	}
	if check()
	check () {
	}
	
	for check ()
	check ()
	{	
	}
	for
	{
		break	
	}
	
	switch check()
	{
	case true:
		println("will go here")
	case false:
	}
}
</code></pre>

<pre class="line-numbers"><code class="language-go">struct {
	title string; author string; pages int
}
</code></pre>

like some other features in Go, there are both praiser and criticizers for the semicolon rules.

Go is a language which recommend programmers to use similar coding styles
so that one programmer can read and understand the Go code written by others,
and vice versa.


try to use "go fmt" and "go vet" often.

</div>


